{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/youtube-timestamp-comments-0-6-4/","result":{"data":{"markdownRemark":{"fields":{"slug":"/blog/youtube-timestamp-comments-0-6-4/"},"id":"6db27ef2-be3a-599a-b6d9-2abc8ae0f9d0","excerpt":"ストアページ https://chrome.google.com/webstore/detail/youtube-timestamp-comment/khngjoedfeicfbjlcfmiigbokbnlibei リポジトリ https://github.com/Foo-x/youtube-timestamp…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; white-space: initial\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3bc4ad516d0d77152228ad96ac498ab/21b4d/screenshot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.53968253968254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADHUlEQVR42j3PSUwTcRgF8J7VE7WdfVpn2hlasBsUFItBNKbuEYuKBRQVoWpZokFRFuNGRQQFJBBRoCqESpUYNLgkJbQluNSFREmMB437EgoRbKdl8tfxYPLybr/vyxOlrzCnLk03paap1BqGVSuUsZSCpRXs/1ayqiSjQa/Xxy/UabWGJUmLTanLEhKT4uK1ojSK0sTF4QiCoyiGIhKxeH6MWBwTIxWLofnQvLlz9Dpj982xwMt3X758mpiYcLtcdGw8m7BUZzCKrJ39a082bahu2F5z0Xruir2t+8zVnqbum1VOV3lXZ2l7b4VzYPRF8PO3cJgLAwA8Ho9KpUIxgqZp0bGx77b+0ZKBQJXnda3vrev9r1EOPJic9s/c94d6ByduBya9XCQcjUa/fv3G87zP51PQtFwug2FYVNDk3ll3rbC+O7/xxoFb/sYnn84+eHS2r6S6I6PGle24u7Hxzr7pmRkuwv38+QMA4PP51Gq1VqsVsN3ZXuTssHW4bM1dhdfdxQOeshuX88q35hzaZN2/Nsu2/OCJgjAXDoW4qalfAIDh4WECxyUSCYIgoobhS1dfdTU/bqsZajn5sM3hbTv+sPZoZ1lF515bZW5ecWZ17eFQ6HckEgkGJwEAXq+XJEm5XCbgsqbyilZ7672qnkCDe+xc33NHX+D03XFHz+jRZndRVWVGc8MBHvARjgsGpwAAIyMjDMNQFCXgyi7LkZZNtU7r+b7tF/tzHNe3HLpgsZ/eUVK+K2ubxWxOLi3Oj0SjszwfCocAAENDQziOYxgmbF65OWWN1bQ+d5FlV2rm7hTLzpT120yGVeaEFauXrNuYaF6Tay/heX42Ojv5b7Pf75fJ5ASBC5hlVKwyVkGzNKWUyyipBIZheIGcFM7jGIwguEKxo9D2+OOHN9MfB58+ycnOTjQamViVVCoVpZmSCZLECQxBEVQIjBP4AoqSyWQ4SSoJYg+CZCDosUF33fizorp6EkUXajQUTQmfE3QahmWVSiXDCMEwDIIgqVQqNARhEJQOw6viVKWNp/LueDfXdyRpNTq9gSTJv/gPIXxWwuDn3wQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e3bc4ad516d0d77152228ad96ac498ab/6ea66/screenshot.webp 315w,\n/static/e3bc4ad516d0d77152228ad96ac498ab/8aab1/screenshot.webp 630w,\n/static/e3bc4ad516d0d77152228ad96ac498ab/af3f0/screenshot.webp 1280w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e3bc4ad516d0d77152228ad96ac498ab/6bdcf/screenshot.png 315w,\n/static/e3bc4ad516d0d77152228ad96ac498ab/f058b/screenshot.png 630w,\n/static/e3bc4ad516d0d77152228ad96ac498ab/21b4d/screenshot.png 1280w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e3bc4ad516d0d77152228ad96ac498ab/f058b/screenshot.png\"\n            alt=\"screenshot\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>ストアページ\n<ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/youtube-timestamp-comment/khngjoedfeicfbjlcfmiigbokbnlibei\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://chrome.google.com/webstore/detail/youtube-timestamp-comment/khngjoedfeicfbjlcfmiigbokbnlibei</a></li>\n</ul>\n</li>\n<li>リポジトリ\n<ul>\n<li><a href=\"https://github.com/Foo-x/youtube-timestamp-comments\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/Foo-x/youtube-timestamp-comments</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"youtube-timestamp-comments-について\" style=\"position:relative;\"><a href=\"#youtube-timestamp-comments-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\" aria-label=\"youtube timestamp comments について permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YouTube Timestamp Comments について</h2>\n<p><code class=\"language-text\">1:23</code> のような時間指定コメントをソートして表示する Google Chrome 拡張機能です。</p>\n<p>現在の YouTube の仕様には以下の問題があると考えています。</p>\n<ul>\n<li>時間指定コメントのみを表示することができない</li>\n<li>時間順でソートすることができない</li>\n<li>時間をクリックするとスクロール位置が一番上に戻ってしまう\n<ul>\n<li>他のコメントを読みたいときに毎回スクロールしなおす必要がある</li>\n</ul>\n</li>\n</ul>\n<p>この拡張機能は、これらを解決するものです。</p>\n<h2 id=\"変更点\" style=\"position:relative;\"><a href=\"#%E5%A4%89%E6%9B%B4%E7%82%B9\" aria-label=\"変更点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>変更点</h2>\n<p>今回の更新に機能的な変更はありません。以下は技術的な変更点のみです。</p>\n<h3 id=\"youtube-data-api-を使うようにした\" style=\"position:relative;\"><a href=\"#youtube-data-api-%E3%82%92%E4%BD%BF%E3%81%86%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%81%9F\" aria-label=\"youtube data api を使うようにした permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YouTube Data API を使うようにした</h3>\n<p>v0.5.0 までは、以下のように少しhackな方法でコメントを取得していました。</p>\n<ol>\n<li>グローバルオブジェクトから認証情報を取得</li>\n<li>YouTube のクライアント側がリクエストしているURLに対して、上の認証情報を送信</li>\n</ol>\n<p>この方法を採用したのは、使用者に作業を強制することを避けたからです。\n公式のAPIを使うには、APIキーを用意する必要があります。</p>\n<p>しかし、これは YouTube の仕様変更に弱く、実際に動かなくなったこともあります。\n最終的にはリクエスト先のURLとレスポンスのI/Fがまったく異なるものになり、ほぼ作り直すことになってしまいました。</p>\n<p>以上から、使用者にAPIキーを準備していただく必要はありますが、安定動作を実現するために公式のAPIを使うことにしました。</p>\n<h3 id=\"typescript--react-に移行した\" style=\"position:relative;\"><a href=\"#typescript--react-%E3%81%AB%E7%A7%BB%E8%A1%8C%E3%81%97%E3%81%9F\" aria-label=\"typescript  react に移行した permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TypeScript + React に移行した</h3>\n<p>更新前は <a href=\"https://elm-lang.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Elm</a> を使っていました。\nランタイムエラーが発生しないこと、シンプルなアーキテクチャ、パターンマッチやパイプラインといった便利な構文、親切なコンパイラなどが魅力でした。</p>\n<p>しかし、開発の遅さが気になります。2018年8月に約2年ぶりのリリースがあってから、現在まで3年以上も機能の更新がありません。</p>\n<p>今回のタイミングに合わせて TypeScript とReactに移行することにしました。\nただ、The Elm Architecture はReactと相性が良いこともあるので、アーキテクチャはそのままです。</p>","frontmatter":{"title":"YouTube Timestamp Comments の v0.6.4 をリリースしました","date":"2021-08-04","description":null,"header":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/ac1ca6507a336b88d2733286190ef973/5267c/header.jpg","srcSet":"/static/ac1ca6507a336b88d2733286190ef973/7284f/header.jpg 750w,\n/static/ac1ca6507a336b88d2733286190ef973/29ba9/header.jpg 1080w,\n/static/ac1ca6507a336b88d2733286190ef973/c8896/header.jpg 1366w,\n/static/ac1ca6507a336b88d2733286190ef973/5267c/header.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/ac1ca6507a336b88d2733286190ef973/57584/header.webp 750w,\n/static/ac1ca6507a336b88d2733286190ef973/984df/header.webp 1080w,\n/static/ac1ca6507a336b88d2733286190ef973/4a276/header.webp 1366w,\n/static/ac1ca6507a336b88d2733286190ef973/9c00f/header.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6666666666666666}}},"ogp":{"publicURL":"/static/9702ca7adeb4669a395607547b31453d/ogp.jpg"},"tags":["YouTube","TypeScript","React","Elm"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#youtube-timestamp-comments-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\">YouTube Timestamp Comments について</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%A4%89%E6%9B%B4%E7%82%B9\">変更点</a></p>\n<ul>\n<li><a href=\"#youtube-data-api-%E3%82%92%E4%BD%BF%E3%81%86%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%81%9F\">YouTube Data API を使うようにした</a></li>\n<li><a href=\"#typescript--react-%E3%81%AB%E7%A7%BB%E8%A1%8C%E3%81%97%E3%81%9F\">TypeScript + React に移行した</a></li>\n</ul>\n</li>\n</ul>"}},"pageContext":{"id":"6db27ef2-be3a-599a-b6d9-2abc8ae0f9d0"}},"staticQueryHashes":["1025666349","2148507062","4241674040","739241604"],"slicesMap":{}}