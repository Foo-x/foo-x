{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/rust-elm-jsx-wasm-yew/","result":{"data":{"markdownRemark":{"fields":{"slug":"/blog/rust-elm-jsx-wasm-yew/"},"id":"72c54978-22eb-596b-8519-c93fe0fe9f7a","excerpt":"始めに 少しずつWebAssemblyを使用したWebアプリが現実的になってきましたね！\nつい最近も、WebAssemblyにコンパイルされるC#用Webフレームワークの記事が話題になりました。\nC# で Single Page Web Application が書ける Blazor が凄かった件 ここではC…","html":"<h2 id=\"始めに\" style=\"position:relative;\"><a href=\"#%E5%A7%8B%E3%82%81%E3%81%AB\" aria-label=\"始めに permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>始めに</h2>\n<p>少しずつWebAssemblyを使用したWebアプリが現実的になってきましたね！\nつい最近も、WebAssemblyにコンパイルされるC#用Webフレームワークの記事が話題になりました。\n<a href=\"https://qiita.com/jsakamoto/items/20d4893f6c8cdb0356f6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">C# で Single Page Web Application が書ける Blazor が凄かった件</a></p>\n<p>ここではC#ではなく、Rust用のクライアントサイドWebフレームワークである<strong>Yew</strong>を紹介します。\nYewには以下のような特徴があります。</p>\n<ul>\n<li>Elm風のアーキテクチャ</li>\n<li>JSX風のテンプレート</li>\n<li>WebAssemblyへのコンパイル</li>\n</ul>\n<p>それぞれ実際のコードを交えながら説明していきます。</p>\n<p>なお、Yewのリポジトリは下です。\n<a href=\"https://github.com/DenisKolodin/yew\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/DenisKolodin/yew</a>\nこの記事に出てくるコードはすべてこのリポジトリ内にあるものです。(2018/03/17時点)</p>\n<h2 id=\"elm風のアーキテクチャ\" style=\"position:relative;\"><a href=\"#elm%E9%A2%A8%E3%81%AE%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3\" aria-label=\"elm風のアーキテクチャ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Elm風のアーキテクチャ</h2>\n<p>Elmとは、Webアプリを作成するために開発された純粋関数型言語です。\n関数型言語は学習曲線が急になりがちですが、作者のEvanさんが教育系の企業であるNoRedInkで働いているからか、Elmはとても開発者フレンドリーです。\n影響されているHaskellに比べ、必要な機能のみに絞ってシンプルにし、ドキュメントやサンプルが充実しています。</p>\n<p>また、Elmで書かれたコードは美しいです。\nその美しさの要因はシンプルかつ厳密なシンタックスと、そのアーキテクチャ(<strong>The Elm Architecture; TEA</strong>)です。</p>\n<p>詳細は他の記事に譲りますが、ここではElmアーキテクチャが下の要素で構成されていることだけ理解していれば十分です。</p>\n<ul>\n<li><strong>Model</strong>: 状態</li>\n<li><strong>Update</strong>: Modelの更新処理</li>\n<li><strong>View</strong>: 画面の作成処理</li>\n</ul>\n<p>イベントを受け取り、UpdateでModelを更新し、それをもとにViewを返します。</p>\n<p>YewでElmアーキテクチャを実現している部分のコードです。</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Model</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Msg</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">DoIt</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Component</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Context</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Some details omitted. Explore the examples to get more.</span>\n\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Msg</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Msg</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Properties</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">create</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">:</span> <span class=\"token keyword\">Self</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Properties</span><span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token class-name\">Env</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">Self</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token keyword\">Self</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">update</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">:</span> <span class=\"token keyword\">Self</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Msg</span><span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token class-name\">Env</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">Self</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token class-name\">ShouldRender</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">match</span> msg <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Msg</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">DoIt</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// Update your model on events</span>\n                <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Renderable</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Model</span><span class=\"token operator\">></span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">view</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token class-name\">Html</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">Self</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token macro property\">html!</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Render your model here</span>\n            <span class=\"token operator\">&lt;</span>button onclick<span class=\"token operator\">=</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>_<span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token class-name\">Msg</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">DoIt</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"Click me!\"</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">struct Model { }</code>でModelを定義し、\n<code class=\"language-text\">impl Component&lt;Context> for Model</code>でModelの初期状態とUpdateを定義し、\n<code class=\"language-text\">impl Renderable&lt;Context, Model> for Model</code>でViewを定義しています。\nYewは上のように、ElmアーキテクチャでWebアプリを作成するアプローチをとっています。</p>\n<h2 id=\"jsx風のテンプレート\" style=\"position:relative;\"><a href=\"#jsx%E9%A2%A8%E3%81%AE%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88\" aria-label=\"jsx風のテンプレート permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSX風のテンプレート</h2>\n<p>上のコードでも少し現れましたが、YewはJSX風のテンプレートを記述できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token macro property\">html!</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">&lt;</span>section class<span class=\"token operator\">=</span><span class=\"token string\">\"todoapp\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>header class<span class=\"token operator\">=</span><span class=\"token string\">\"header\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"todos\"</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n            <span class=\"token punctuation\">{</span> <span class=\"token function\">view_input</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>section class<span class=\"token operator\">=</span><span class=\"token string\">\"main\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>input class<span class=\"token operator\">=</span><span class=\"token string\">\"toggle-all\"</span><span class=\"token punctuation\">,</span>\n                   <span class=\"token keyword\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"checkbox\"</span><span class=\"token punctuation\">,</span>\n                   checked<span class=\"token operator\">=</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">is_all_completed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                   onclick<span class=\"token operator\">=</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>_<span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token class-name\">Msg</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">ToggleAll</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token punctuation\">{</span> <span class=\"token function\">view_entries</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>これはRustのマクロ機能によるもので、<code class=\"language-text\">html! { }</code>内の文字列をマクロによってRustのコードに変換しています。</p>\n<p>コンポーネントや、</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token macro property\">html!</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">&lt;</span>nav class<span class=\"token operator\">=</span><span class=\"token string\">\"menu\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token class-name\">MyButton</span><span class=\"token punctuation\">:</span> title<span class=\"token operator\">=</span><span class=\"token string\">\"First Button\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token class-name\">MyButton</span><span class=\"token punctuation\">:</span> title<span class=\"token operator\">=</span><span class=\"token string\">\"Second Button\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>nav<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>フラグメントなどをサポートしています。</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token macro property\">html!</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"Row\"</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"Row\"</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"Row\"</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>JSX風と書いたように、すべての機能はサポートしておらず、書き方も若干異なります。</p>\n<h2 id=\"webassemblyへのコンパイル\" style=\"position:relative;\"><a href=\"#webassembly%E3%81%B8%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB\" aria-label=\"webassemblyへのコンパイル permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WebAssemblyへのコンパイル</h2>\n<p>Yewのアプリは<a href=\"https://github.com/koute/cargo-web\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cargo-web</a>を使用してビルドします。\nデフォルトではasm.jsで出力されますが、コンパイルターゲットに<code class=\"language-text\">wasm32-unknown-emscripten</code>や<code class=\"language-text\">wasm32-unknown-unknown</code>を追加することでWebAssemblyにコンパイルされます。\n最初の環境構築に少し手間がかかります(といってもコマンドを何個か入力するだけです)が、WebAssemblyで実行されるため処理が速いです。\nもちろん1度環境を構築してしまえば2回目以降は不要です。</p>\n<p>実際、Yewのサンプルアプリとして公開されている<a href=\"https://github.com/DenisKolodin/yew/tree/master/examples/large_table\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">large-table</a>はasm.jsだとまともに動きませんが、WebAssemblyだと少し重いですがちゃんと動きました。</p>\n<p>また、WebAssemblyのファイルサイズですが、サンプルアプリの<a href=\"https://github.com/DenisKolodin/yew/tree/master/examples/todomvc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">todomvc</a>を普通にビルド(<code class=\"language-text\">cargo web build</code>)すると<strong>2.1MB</strong>でした。(<code class=\"language-text\">todomvc.wasm</code>)\nリリースビルド(<code class=\"language-text\">cargo web build --release</code>)にすると最適化されて<strong>466KB</strong>でした。\nコードの規模に対して少し大きいですが、許容範囲ではないでしょうか。\nただやはり現時点でWebAssemblyが一番活きるのは小さいコードで重い処理を行う場合だと思います。</p>\n<p>ちなみにYewの開発者本人がパフォーマンスを測定しています。\n<a href=\"https://github.com/DenisKolodin/yew/issues/5#issuecomment-354777076\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/DenisKolodin/yew/issues/5#issuecomment-354777076</a>\nソース: <a href=\"https://github.com/DenisKolodin/todomvc-perf-comparison\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/DenisKolodin/todomvc-perf-comparison</a>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 617px; white-space: initial\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.38095238095238%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtklEQVR42p2UTW/TQBCG8z+5c+APcACJExy49tADQqq4QxQOoF4QoHJAhEo0WEqTlCSs1FIniu311/rzQbNlo6CUj3Sl156xZx7PjsfuGGOoqoqyLNcS/yYSVqcoCpqmoW1a6qZGnSum0ylKKWazGUmSIEti/iVhdaQiWVVTEV1GrIYheWbsTVd9XddWknSd7XwLDMOQ1WqFms/pex77Xp+LKKCqq3Wgg/7NXgPTNCWOY/wfPt5owMH7Jwznp+QmvxnQbXnhX/LFO+X2/hGvj6foOPm1rR2B0idxgjBkMh7z/OAZb3sv8C/OcS9sJ6AcRGffJgwHI3r3P9B78JnRiU+SpNRtTVldjdJ/A9u2RX1XDLwTnr7aY6/7iDefusSR5mpm2K1C6eNkfMbx1z4Pj+5w790tHn+8y8tRl8P5ISpQmMJsjcrm+PzWQ1kywP5igTaGAgjzhEWyICgCdKrJ8szGSbzLybLMaqtC+6W0rVVVVhS5IdYxaZxSmhIdaWReBRQEgbXzPP8zUECbfbFJUUgURSyXSwvQWltfbDlLjCtia8tywX3gYkuQe6pLus7e/DFIngB/AkHdNVIcoT4uAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a5d639fb10781cfbb33f1ad8b0801c67/6ea66/bench.webp 315w,\n/static/a5d639fb10781cfbb33f1ad8b0801c67/20989/bench.webp 617w\"\n              sizes=\"(max-width: 617px) 100vw, 617px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a5d639fb10781cfbb33f1ad8b0801c67/6bdcf/bench.png 315w,\n/static/a5d639fb10781cfbb33f1ad8b0801c67/bc962/bench.png 617w\"\n            sizes=\"(max-width: 617px) 100vw, 617px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a5d639fb10781cfbb33f1ad8b0801c67/bc962/bench.png\"\n            alt=\"yew-benchmark\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"まだ実験段階です\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A0%E5%AE%9F%E9%A8%93%E6%AE%B5%E9%9A%8E%E3%81%A7%E3%81%99\" aria-label=\"まだ実験段階です permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まだ実験段階です</h2>\n<p>Blazorもそうですが、Yewも例によって実験段階です。\nどちらも昨年の12月上旬にリポジトリが作成されており、最初のコミットからまだ3ヶ月ほどしか経っていません。(※追記 Blazorは個人プロジェクトとして昨年の5月には存在していました)\nドキュメントもREADMEレベルのものしかないです。\nC#で書かれているBlazorと違い、Rustはまだ歴史が浅い言語なのでライブラリも少ないはずです。\nプロダクションで利用可能になるまでは、着実に近づいてはいますが、まだしばらく先だと思います。</p>\n<p>また、AltJSとして見た場合、JavaScriptの資産を使うのは現実的ではありません。\n(一応WebAssemblyとJavaScriptの間で相互にアクセスするAPIはあります)\nどうしてもJSの資産を使いたい場合は素直にTypeScriptを使い、Rustで完結できる場合のみYewを採用するほうが幸せだと思います。</p>\n<h2 id=\"最後に\" style=\"position:relative;\"><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\" aria-label=\"最後に permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最後に</h2>\n<p>Rust用WebフレームワークのYewを紹介しました。\n私自身あまり触れていないので深いところまで紹介できませんでしたが、最初に挙げた記事に触発され、この波に乗り遅れるわけにはいかないと思って急いで書いてしまいました。</p>\n<p>そもそもなぜクライアントサイドをJavaScriptで書かないのかとか、なぜWebAssemblyにコンパイルするのか、といった部分はこの記事では書きませんでした。\nAltJSやWebAssemblyのモチベーションについては素晴らしい記事がたくさんあるので、もし上のような疑問がある場合は探してみてください。\nまた、なぜRustなのかが気になる場合も、Rustの素晴らしさを解説した記事がたくさんあるはずなのでぜひ探してみてください。</p>","frontmatter":{"title":"Rust + Elm + JSX + WebAssembly = Yew","date":"2018-03-18","description":null,"header":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/f274f77bae5d8079ff1c7378102aed8c/5267c/header.jpg","srcSet":"/static/f274f77bae5d8079ff1c7378102aed8c/7284f/header.jpg 750w,\n/static/f274f77bae5d8079ff1c7378102aed8c/29ba9/header.jpg 1080w,\n/static/f274f77bae5d8079ff1c7378102aed8c/c8896/header.jpg 1366w,\n/static/f274f77bae5d8079ff1c7378102aed8c/5267c/header.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/f274f77bae5d8079ff1c7378102aed8c/57584/header.webp 750w,\n/static/f274f77bae5d8079ff1c7378102aed8c/984df/header.webp 1080w,\n/static/f274f77bae5d8079ff1c7378102aed8c/4a276/header.webp 1366w,\n/static/f274f77bae5d8079ff1c7378102aed8c/9c00f/header.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6666666666666666}}},"ogp":{"publicURL":"/static/5d108c3a15dd5657ac6ea6569d883a7c/ogp.jpg"},"tags":["Yew","Rust","Elm","JSX","WebAssembly"]},"tableOfContents":"<ul>\n<li><a href=\"#%E5%A7%8B%E3%82%81%E3%81%AB\">始めに</a></li>\n<li><a href=\"#elm%E9%A2%A8%E3%81%AE%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3\">Elm風のアーキテクチャ</a></li>\n<li><a href=\"#jsx%E9%A2%A8%E3%81%AE%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88\">JSX風のテンプレート</a></li>\n<li><a href=\"#webassembly%E3%81%B8%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB\">WebAssemblyへのコンパイル</a></li>\n<li><a href=\"#%E3%81%BE%E3%81%A0%E5%AE%9F%E9%A8%93%E6%AE%B5%E9%9A%8E%E3%81%A7%E3%81%99\">まだ実験段階です</a></li>\n<li><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\">最後に</a></li>\n</ul>"}},"pageContext":{"id":"72c54978-22eb-596b-8519-c93fe0fe9f7a"}},"staticQueryHashes":["1025666349","2148507062","4241674040","739241604"],"slicesMap":{}}