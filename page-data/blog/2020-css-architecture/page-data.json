{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/blog/2020-css-architecture/",
    "result": {"data":{"markdownRemark":{"fields":{"slug":"/blog/2020-css-architecture/"},"id":"633d1159-8671-5988-902c-b44fe13d0c3d","excerpt":"JavaScriptフレームワーク界が混沌としていた時代は終わりました。\n現在はReact一強の時代です。日本ではVue.jsが次点でしょうか。 https://www.npmtrends.com/react-vs-vue-vs-@angular/core-vs-backbone-vs-svelte  JS…","html":"<p>JavaScriptフレームワーク界が混沌としていた時代は終わりました。\n現在はReact一強の時代です。日本ではVue.jsが次点でしょうか。</p>\n<p><a href=\"https://www.npmtrends.com/react-vs-vue-vs-@angular/core-vs-backbone-vs-svelte\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.npmtrends.com/react-vs-vue-vs-@angular/core-vs-backbone-vs-svelte</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; white-space: initial\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fc198ba75f82d1135fea86172c226f7c/d53ff/js-framework.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.63492063492063%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAABzklEQVQoz32S227bMBBE/f+f1MciQIKiD02BFGlSO65vcaO7KJEid8lTSJZTB0G6wAArkDPcmdWirmvKsiTLMvquQ/yAtY7aGNq6IXghpcRHdTpK050RixgjE1QJGnkxgeAdqSsxvqNyNeIFUSE1Nd45VANRXhDRN2JjLUQEay0pRYImnooBbw3Uz1Sh4dAd8dYz+IH4fMC2Bh8cOiwZBpl4o+gIL5FFCAFjDKPw+SCOLzJ/vlpLxAubcb4wumuccmyFb3t3mrDve1R1IqnGuT9FoTGexOZoUjz1JJ1tJj4vez797LAhshjJo+Wz4CtxzuWyP0M0TuRR7Hrdk3dCZfVfhpcT/k/wsr9a9XzdOq7Xls7ra1STYDf+LiLvBC/7s/WxlrlnVwfaQdnXgaqXedu8FxyJ47Tn/GLUeZMRH4RN4bl56mlmi1mXcHJaVozyNsOPShMcWngoYGsSpU80XhEEPxSIK7DtBuvyk6BzjhBkQmMseVZRv5Rss5z73Zpf+xV363u2m1ua7DvZ5oZsfUV1uMWtvhCOj0i+AWdYnKdo+4GiLGj+7Kh2K0y2JTs+0uR3qHtiMA/Y4geY32i1Qs0ehgxpdmh3IPZH4tDyF07ZplsPkMkSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/fc198ba75f82d1135fea86172c226f7c/6ea66/js-framework.webp 315w,\n/static/fc198ba75f82d1135fea86172c226f7c/8aab1/js-framework.webp 630w,\n/static/fc198ba75f82d1135fea86172c226f7c/55b8e/js-framework.webp 1068w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/fc198ba75f82d1135fea86172c226f7c/6bdcf/js-framework.png 315w,\n/static/fc198ba75f82d1135fea86172c226f7c/f058b/js-framework.png 630w,\n/static/fc198ba75f82d1135fea86172c226f7c/d53ff/js-framework.png 1068w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/fc198ba75f82d1135fea86172c226f7c/f058b/js-framework.png\"\n            alt=\"JS Framework\"\n            title=\"JS Framework\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>JSはこのような状況ですが、CSS設計については今もなお混沌としています。\nReact、Vue.js、その他の各フレームワークごとにベストな方法を考えてみます。</p>\n<h2 id=\"react\" style=\"position:relative;\"><a href=\"#react\" aria-label=\"react permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React</h2>\n<p><strong>CSS Modules > CSS in JS >>> Global CSS</strong></p>\n<p>実は、ReactのドキュメントではCSSについてほとんど触れていません。\n<a href=\"https://ja.reactjs.org/docs/faq-styling.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://ja.reactjs.org/docs/faq-styling.html</a></p>\n<p>そこで<a href=\"https://nextjs.org/docs/basic-features/built-in-css-support\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Next.js</a>と<a href=\"https://www.gatsbyjs.com/docs/how-to/styling/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Gatsby</a>のドキュメントを参照してみます。\nこれらはReactを包んでいる有名なフレームワークです。\n主に3つの方法があるようですね。</p>\n<ul>\n<li><strong>Global CSS</strong>\n<ul>\n<li>サイト全体に適用されるCSSを書く</li>\n<li>昔からある方法</li>\n</ul>\n</li>\n<li><strong>CSS Modules</strong>\n<ul>\n<li>各コンポーネントに適用されるCSSを書く</li>\n</ul>\n</li>\n<li><strong>CSS in JS</strong>\n<ul>\n<li>各コンポーネントに適用されるCSSをJavaScriptの中に書く</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"global-css\" style=\"position:relative;\"><a href=\"#global-css\" aria-label=\"global css permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Global CSS</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- app.html --></span>\n\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ja<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- ... --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- ... --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* app.css */</span>\n\n<span class=\"token selector\">.example</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> black<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>example<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">bar</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Reactに限らず、どのフレームワークでも採用できる方法ですね。\n導入に必要な手順もなく、最もわかりやすいです。</p>\n<p>しかし、アプリが大きくなるにつれて問題が発生しやすい方法でもあります。\nグローバルにスタイルを適用するので、競合する可能性が高いのです。\nCSS ModulesやCSS in JSがある現代において、あえて採用する必要はないでしょう。</p>\n<h3 id=\"css-modules\" style=\"position:relative;\"><a href=\"#css-modules\" aria-label=\"css modules permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS Modules</h3>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* foo-component.module.css */</span>\n\n<span class=\"token selector\">.example</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> black<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// foo-component.js</span>\n\n<span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">\"./foo-component.module.css\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FooComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">bar</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>コンポーネントごとに対応するCSSを用意する方法です。\n異なる<code class=\"language-text\">.module.css</code>で同じクラス名を定義しても競合が発生しません。</p>\n<p>素のReactに導入するには<a href=\"https://webpack.js.org/loaders/css-loader/#pure-css-css-modules-and-postcss\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">webpack</a>や<a href=\"https://parceljs.org/css.html#postcss\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Parcel</a>のようなバンドラへの設定が必要です。\nNext.jsやGatsbyでは最初から使えます。</p>\n<h3 id=\"css-in-js\" style=\"position:relative;\"><a href=\"#css-in-js\" aria-label=\"css in js permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS in JS</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// foo-component.js</span>\n\n<span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">\"styled-components\"</span>\n\n<span class=\"token keyword\">const</span> Div <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  background-color: black;\n  color: white;\n</span><span class=\"token template-punctuation string\">`</span></span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FooComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Div</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">bar</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Div</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>JSの中に各コンポーネントのCSSを書く方法です。スタイルを動的に変更したり、再利用することが簡単です。バンドラの設定も不要です。</p>\n<p>しかし、CSS Modulesと比べると以下の欠点があります。</p>\n<ul>\n<li>パフォーマンスが悪い\n<ul>\n<li><a href=\"http://necolas.github.io/react-native-web/benchmarks/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ベンチマーク</a></li>\n<li>CSSファイルを作成せずに<code class=\"language-text\">&lt;style></code>を挿入するライブラリに関してはキャッシュできない問題もある</li>\n</ul>\n</li>\n<li>デザイナーにJSのスキルが求められる</li>\n<li>ライブラリによって書き方が異なる\n<ul>\n<li>上のコードは現時点でデファクトに近い<a href=\"https://styled-components.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">styled-components</a>の例</li>\n<li>最近は<a href=\"https://github.com/callstack/linaria\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">linaria</a>が熱いらしく、主流が変わるたびに移行の検討が必要\n<ul>\n<li>ただしlinariaはstyled-componentsの書き方もサポートしている様子</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>以上からReactにおけるCSS設計は、今のところCSS Modulesのほうが良い印象です。\n参考になりそうなリンクを挙げておきます。</p>\n<ul>\n<li><a href=\"https://zenn.dev/takepepe/scraps/6668e9fe402666\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Next.js が CSS Modules を推奨する真相に迫りたい</a></li>\n<li><a href=\"https://zenn.dev/catnose99/scraps/5e3d51d75113d3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Next.jsにCSS Modulesを導入する</a></li>\n<li><a href=\"https://yoshiko-pg.github.io/slides/20180419-scramble/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SPAにおけるCSSについて、もうひとつの解 - @yoshiko_pg</a></li>\n</ul>\n<hr>\n<p>なお、<a href=\"https://github.com/webpack-contrib/css-loader\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">css-loader</a>のIssueに書かれた<a href=\"https://github.com/webpack-contrib/css-loader/issues/1050?#issuecomment-592541379\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">こちらのコメント</a>を根拠に、CSS Modulesは廃止される可能性が高い、という意見があります。\ncss-loaderはwebpackでCSS Modulesを実現するライブラリです。</p>\n<p>結論としては特に心配する必要はありません。<a href=\"https://github.com/webpack-contrib/css-loader/issues/1050?#issuecomment-729606066\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">その後のコメント</a>にある通り、廃止されたとしても別のライブラリに分かれるだけでしょう。</p>\n<h2 id=\"vuejs\" style=\"position:relative;\"><a href=\"#vuejs\" aria-label=\"vuejs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vue.js</h2>\n<p><strong>CSS Modules > Scoped CSS</strong></p>\n<p>Vue.jsには<strong>単一ファイルコンポーネント</strong>という仕組みがあります。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>example<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ msg }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">msg</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello world!'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">.example</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">&lt;style></code>タグの属性に何も加えないとグローバルに適用されます。すでに上で書いたように、競合しやすいので避けましょう。</p>\n<p><code class=\"language-text\">scoped</code>を加えると<strong>Scoped CSS</strong>、<code class=\"language-text\">module</code>を加えると<strong>CSS Modules</strong>になります。</p>\n<h3 id=\"scoped-css\" style=\"position:relative;\"><a href=\"#scoped-css\" aria-label=\"scoped css permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scoped CSS</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>example<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hello world!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">scoped</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">.example</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>コンパイル後は以下のようになります。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>example<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-v-f3f3eg9</span><span class=\"token punctuation\">></span></span>Hello world!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">.example[data-v-f3f3eg9]</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>コンポーネントごとに固有の<code class=\"language-text\">data</code>属性を加えるため、スタイルが競合しにくいです。</p>\n<p>ただし、グローバルに適用するCSSが存在する場合は競合する可能性があります。\n上の例だと、グローバルなCSSで<code class=\"language-text\">.example</code>にスタイルを適用していると競合しますね。</p>\n<h3 id=\"css-modules-1\" style=\"position:relative;\"><a href=\"#css-modules-1\" aria-label=\"css modules 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS Modules</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">:class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$style.example<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hello world!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">module</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">.example</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>コンパイル後は以下のようになります。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>_1VyoJ-uZOjlOxP7jWUy19_0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hello world!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">._1VyoJ-uZOjlOxP7jWUy19_0</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>クラス名自体を変換するため、グローバルなCSSがあっても競合しにくいです。</p>\n<p>以上からVue.jsにおけるCSS設計も基本的にはCSS Modulesを推奨します。</p>\n<h2 id=\"その他\" style=\"position:relative;\"><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\" aria-label=\"その他 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>その他</h2>\n<p>ReactやVue.js以外にもクライアント側でHTMLを組み立てるフレームワークがあります。<a href=\"https://angularjs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">AngularJS</a>や<a href=\"https://svelte.dev/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Svelte</a>などですね。</p>\n<p>それらについてはそのフレームワークが推奨するCSS設計に従いましょう。\n例えばSvelteはVue.jsと似た書き方ができます。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>example<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hello world!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">.example</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>JSフレームワークを使わずにサーバ側でHTMLを組み立てるという選択肢もあります。\nその場合はグローバルなCSSを使わなくてはいけません。\n設計方法にはいくつかの種類がありますが、おすすめは<a href=\"https://en.bem.info/methodology/quick-start/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">BEM</a> + <a href=\"https://github.com/hiloki/flocss\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">FLOCSS</a>です。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>フレームワークごとにベストなCSS設計を考えてみました。\n改めてまとめます。</p>\n<ul>\n<li>React\n<ul>\n<li><strong>CSS Modules > CSS in JS >>> Global CSS</strong></li>\n</ul>\n</li>\n<li>Vue.js\n<ul>\n<li><strong>CSS Modules > Scoped CSS</strong></li>\n</ul>\n</li>\n<li>その他\n<ul>\n<li>フレームワークが推奨する方法に従う</li>\n<li><strong>BEM + FLOCSS</strong></li>\n</ul>\n</li>\n</ul>\n<p>選択肢が多いので選定が難しいですね。\n来年にはまた変わっていそうなので、定期的に情報を整理したいと思います。</p>","frontmatter":{"title":"2020年におけるCSS設計の暫定解","date":"2020-12-26","description":null,"header":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","images":{"fallback":{"src":"/static/ed2ab0294dc73294d260daaf68ae86e3/5267c/header.jpg","srcSet":"/static/ed2ab0294dc73294d260daaf68ae86e3/7284f/header.jpg 750w,\n/static/ed2ab0294dc73294d260daaf68ae86e3/29ba9/header.jpg 1080w,\n/static/ed2ab0294dc73294d260daaf68ae86e3/c8896/header.jpg 1366w,\n/static/ed2ab0294dc73294d260daaf68ae86e3/5267c/header.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/ed2ab0294dc73294d260daaf68ae86e3/57584/header.webp 750w,\n/static/ed2ab0294dc73294d260daaf68ae86e3/984df/header.webp 1080w,\n/static/ed2ab0294dc73294d260daaf68ae86e3/4a276/header.webp 1366w,\n/static/ed2ab0294dc73294d260daaf68ae86e3/9c00f/header.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6666666666666666}}},"ogp":{"publicURL":"/static/b047894cba90f10b3b99bdc7e1cdc761/ogp.jpg"},"tags":["CSS","React","Vue.js"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#react\">React</a></p>\n<ul>\n<li><a href=\"#global-css\">Global CSS</a></li>\n<li><a href=\"#css-modules\">CSS Modules</a></li>\n<li><a href=\"#css-in-js\">CSS in JS</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#vuejs\">Vue.js</a></p>\n<ul>\n<li><a href=\"#scoped-css\">Scoped CSS</a></li>\n<li><a href=\"#css-modules-1\">CSS Modules</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\">その他</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\">まとめ</a></p>\n</li>\n</ul>"}},"pageContext":{"id":"633d1159-8671-5988-902c-b44fe13d0c3d"}},
    "staticQueryHashes": ["3159585216","3357329864","3468387890","3862782001"]}